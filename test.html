<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù‚ÙŠÙ…ÙŠ - ØªÙ…Ø±ÙŠÙ† Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± (5 Ø´Ù‚ÙˆÙ‚)</title>
    <link href="https://fonts.googleapis.com/css2?family=Markazi+Text:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- Temel Sayfa Stilleri --- */
        :root {
            --accent-color: #007bff;
            --success-color: #28a745;
            --danger-color: #dc3545;
            --bg-light: #f8f9fa;
            /* GÃœNCELLENDÄ°: YazÄ± tipi Markazi Text olarak deÄŸiÅŸtirildi */
            --font-arabic: 'Markazi Text', 'Tahoma', 'Arial', sans-serif;
        }

        body {
            font-family: var(--font-arabic);
            background-color: #e9ecef;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden;
            font-weight: 400;
        }

        /* --- Ana Etkinlik AlanÄ± (16:9 ve 9:16) --- */
        .activity-container {
            position: relative;
            background: #ffffff;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            width: 90vw;
            height: calc(90vw * 9 / 16); /* 16:9 */
            max-height: 90vh;
            max-width: calc(90vh * 16 / 9); /* 16:9 */
        }
        
        /* --- Geri TuÅŸu (Header Ä°Ã§in Yeniden DÃ¼zenlendi) --- */
        .back-button-container {
            grid-area: back;
            display: flex;
            /* RTL'de en sola (flex-end) hizalar */
            justify-content: flex-end;
        }
        .back-button {
            /* (Absolute stilleri kaldÄ±rÄ±ldÄ±) */
            background: #f0f0f0;
            color: #555;
            border: 1px solid #ccc;
            border-radius: 1.5vmin;
            cursor: pointer;
            width: clamp(40px, 8vmin, 55px);
            height: clamp(40px, 8vmin, 55px);
            padding: 0;
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .back-button:hover {
            background: #e0e0e0;
        }
        .back-button svg {
            width: clamp(24px, 5vmin, 30px);
            height: clamp(24px, 5vmin, 30px);
            fill: currentColor;
        }


        /* --- BaÅŸlÄ±k ve Ä°lerleme Ã‡ubuÄŸu (Simetrik 3 SÃ¼tun) --- */
        .header {
            padding: 15px 25px;
            border-bottom: 1px solid #dee2e6;
            display: grid;
            /* 3 SÃ¼tunlu simetrik alan: SaÄŸ(200) | Orta(1fr) |
 Sol(200) */
            grid-template-areas: "progress instruction back";
            grid-template-columns: 200px 1fr 200px;
            align-items: center;
            gap: 20px;
            /* padding-left kaldÄ±rÄ±ldÄ±, artÄ±k grid yÃ¶netiyor */
        }
        
        #instruction-text { /* YÃ¶nerge (Ortada) */
            grid-area: instruction;
            text-align: center; 
            font-size: 2.2rem; /* YAZI BOYUTU BÃœYÃœTÃœLDÃœ */
            font-weight: 700;
            color: #555;
        }
        
        .progress-container { /* Ä°lerleme Ã‡ubuÄŸu (SaÄŸda) */
            grid-area: progress;
            display: flex;
            align-items: center;
            gap: 15px;
            justify-content: flex-start;
            width: 200px;
            direction: ltr;
        }
        #progress-display {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--accent-color);
            flex-shrink: 0;
        }
        .progress-bar-container {
            flex-grow: 1;
            height: 12px;
            background-color: #e0e0e0;
            border-radius: 6px;
            overflow: hidden;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
        }
        #progress-bar {
            height: 100%;
            width: 0%;
            background-color: var(--accent-color);
            transition: width 0.4s ease, background-color 0.4s ease;
        }


        /* --- AsÄ±l Etkinlik AlanÄ± --- */
        .activity-area {
            flex-grow: 1;
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            overflow-y: auto;
        }
        
        /* --- Soru Tipi: Test (Quiz) --- */
        .quiz-container {
            width: 100%;
        }
        .question {
            font-size: 4.2rem; /* GÃœNCELLENDÄ° (MasaÃ¼stÃ¼ bÃ¼yÃ¼tÃ¼ldÃ¼) */
            font-weight: 700;
            text-align: center;
            margin-bottom: 30px;
            color: #212529;
            line-height: 1.5;
        }
        .options {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px; 
        }
        .option {
            width: 500px;
            max-width: 100%;
            box-sizing: border-box;
            padding: 8px 5px; /* GÃœNCELLENDÄ° (Dikey boÅŸluk arttÄ±) */
            font-size: 2.8rem; /* GÃœNCELLENDÄ° (MasaÃ¼stÃ¼ bÃ¼yÃ¼tÃ¼ldÃ¼) */
            font-family: var(--font-arabic);
            background-color: var(--bg-light);
            border: 2px solid #ced4da;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
        }
        .option:hover {
            border-color: var(--accent-color);
            background-color: #eef5ff;
        }

        /* --- Geri Bildirim EkranÄ± (âœ” / âŒ) --- */
        .feedback-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.95);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 15rem;
            z-index: 200;
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .feedback-overlay.show {
            visibility: visible;
            opacity: 1;
        }
        .feedback-overlay .correct { color: var(--success-color); }
        .feedback-overlay .incorrect { color: var(--danger-color); }
        
        /* --- BitiÅŸ EkranÄ± --- */
        #finish-screen {
            text-align: center;
            font-weight: 700;
            color: var(--accent-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
        }
        #finish-screen p {
            font-size: 3.5rem;
            margin: 10px 0;
        }
        
        .score-display {
            display: flex;
            gap: 30px;
            font-size: 2.8rem;
            margin: 20px 0;
            direction: ltr;
        }
        .score-item {
            font-weight: 700;
        }
        .score-correct {
            color: var(--success-color);
        }
        .score-incorrect {
            color: var(--danger-color);
        }

        #replay-button {
            font-size: 4.5rem;
            background: none;
            border: none;
            cursor: pointer;
            padding: 10px;
            border-radius: 50%;
            transition: transform 0.2s ease, background-color 0.2s ease;
        }
        #replay-button:hover {
            transform: rotate(-90deg);
            background-color: #f0f0f0;
        }

        /* --- Mobil DÃ¼zen (Simetrik BaÅŸlÄ±k) --- */
        @media (orientation: portrait) {
            .activity-container {
                width: 95vw;
                height: calc(95vw * 16 / 9); /* 9:16 */
                max-height: 95vh;
                max-width: calc(95vh * 9 / 16); /* 9:16 */
            }

            .header {
                /* Ãœst: SaÄŸ(Ä°lerleme) |
 Sol(Geri) */
                /* Alt: YÃ¶nerge */
                grid-template-areas: 
                    "progress back"
                    "instruction instruction";
                grid-template-columns: 1fr 1fr; 
                gap: 10px;
                padding: 10px 15px;
            }

            .progress-container {
                width: auto;
                justify-content: flex-start; /* Ä°lerleme saÄŸda */
            }
            
            .back-button-container {
                justify-content: flex-end; /* Geri tuÅŸu solda */
            }
            
            #instruction-text {
                font-size: 1.4rem; /* Mobil iÃ§in bÃ¼yÃ¼tÃ¼ldÃ¼ (1.1'den) */
                min-width: unset;
                justify-self: center;
            }

            #progress-display {
                font-size: 1.2rem;
            }

            /* Mobil: Test ÅÄ±klarÄ± */
            .options {
                gap: 5px;
            }
            .option {
                font-size: 1.5rem;
                padding: 8px;
            }
            .question {
                font-size: 2rem;
                margin-bottom: 15px;
            }
        }

    </style>
</head>
<body>

    <div class="activity-container">
        
        <div class="header">
            
            <div class="progress-container">
                <div id="progress-display">........</div> 
                <div class="progress-bar-container">
                    <div id="progress-bar"></div>
                </div>
            </div>
            
            <div id="instruction-text">........</div>
            
            <div class="back-button-container">
                <a href="index.html" class="back-button">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                    </svg>
                </a>
            </div>
        </div>

        <div class="activity-area" id="activity-area">
            </div>

        <div class="feedback-overlay" id="feedback-overlay">
            <span id="feedback-icon"></span>
        </div>

    </div>

    <script>
        // --- ETKÄ°NLÄ°K VERÄ°LERÄ° (10. SINIF - 1. ÃœNÄ°TE: DEÄERLERÄ°M) ---
        // (Veri setindeki hatalar dÃ¼zeltildi)
        
        const activitiesData = [
            { 
                quiz: [
                    /* GÃœNCELLENDÄ°: Bunlar cÃ¼mle olduÄŸu iÃ§in nokta kaldÄ± */
                    { q: "Ù…Ø§ Ù…ÙÙ‡Ù’Ù†ÙØ© ÙˆØ§Ù„ÙØ¯ÙÙƒØŸ", o: ["Ù‡ÙÙˆ Ù…ÙÙ‡ÙÙ†Ù’Ø¯ÙØ³.", "Ù‡ÙÙŠ ØªÙÙƒÙ’ØªÙØ¨.", "Ù‡ÙÙ…Ø§ ÙŠÙØ²ÙˆØ±Ø§Ù†.", "Ø£ÙÙ†Ø§ Ø£ÙØ­ÙØ¨Ù‘Ù.", "Ù‡ÙØ°Ø§Ù† Ø·Ø§Ù„ÙØ¨Ø§Ù†."], a: 0 },
                    /* GÃœNCELLENDÄ°: Bunlar cÃ¼mle olduÄŸu iÃ§in nokta kaldÄ± */
                    { q: "Ø£ÙÙŠÙ’Ù† ÙŠÙØ¹Ù’Ù…ÙÙ„Ù Ø§Ù„Ø·Ù‘ÙØ¨ÙŠØ¨ØŸ", o: ["ÙŠÙØ¹Ù’Ù…ÙÙ„Ù ÙÙŠ Ø§Ù„Ù…ÙØ³Ù’ØªÙØ´Ù’ÙÙ‰.", "ÙŠÙØ¹Ù’Ù…ÙÙ„Ù ÙÙŠ Ø§Ù„Ù…ÙØµÙ’Ù†ÙØ¹.", "ÙŠÙØ¹Ù’Ù…ÙÙ„Ù ÙÙŠ Ø§Ù„Ù…ÙØ¯Ù’Ø±ÙØ³ÙØ©.", "Ù‡ÙÙˆ ÙŠÙØ³ÙˆÙ‚.", "Ø£ÙÙ†Ø§ Ù…ÙØ´Ù’ØªØ§Ù‚."], a: 0 },
                    
                    /* GÃœNCELLENDÄ°: Bunlar tek kelime olduÄŸu iÃ§in noktalar kaldÄ±rÄ±ldÄ± */
                    { q: "Ù‡ÙØ°Ø§Ù† ........ .", o: ["Ù…ÙÙ‡ÙÙ†Ù’Ø¯ÙØ³Ø§Ù†", "Ù…ÙÙ‡ÙÙ†Ù’Ø¯ÙØ³", "Ù…ÙÙ‡ÙÙ†Ù’Ø¯ÙØ³ÙˆÙ†", "Ù…ÙÙ‡ÙÙ†Ù’Ø¯ÙØ³ÙØ©", "Ù…ÙÙ‡ÙÙ†Ù’Ø¯ÙØ³ÙØ§Øª"], a: 0 },
                    /* GÃœNCELLENDÄ°: Tek kelimelerden nokta kaldÄ±rÄ±ldÄ±, "Ù‡ÙÙˆ Ù…ÙØ¯ÙØ±Ù‘ÙØ³." cÃ¼mlesinde kaldÄ± */
                    { q: "Ù‡ÙØ¤ÙÙ„Ø§Ø¡Ù ........ .", o: ["Ù…ÙØ¯ÙØ±Ù‘ÙØ³ÙˆÙ†", "Ù…ÙØ¯ÙØ±Ù‘ÙØ³", "Ù…ÙØ¯ÙØ±Ù‘ÙØ³Ø§Ù†", "Ù…ÙØ¯ÙØ±Ù‘ÙØ³ÙØ©", "Ù‡ÙÙˆ Ù…ÙØ¯ÙØ±Ù‘ÙØ³."], a: 0 },
                    /* GÃœNCELLENDÄ°: Bunlar tek kelime olduÄŸu iÃ§in noktalar kaldÄ±rÄ±ldÄ± */
                    { q: "Ù‡ÙÙ…Ø§ ........ ÙÙŠ Ø§Ù„Ù…ÙØµÙ’Ù†ÙØ¹â€«.â€¬", o: ["ÙŠÙØ¹Ù’Ù…ÙÙ„Ø§Ù†Ù", "ÙŠÙØ¹Ù’Ù…ÙÙ„Ù", "ØªÙØ¹Ù’Ù…ÙÙ„Ù", "ÙŠÙØ¹Ù’Ù…ÙÙ„ÙˆÙ†Ù", "ØªÙØ¹Ù’Ù…ÙÙ„Ù’Ù†Ù"], a: 0 }
                ]
            },
            { 
                quiz: [
                    /* GÃœNCELLENDÄ°: Bunlar tek kelime olduÄŸu iÃ§in noktalar kaldÄ±rÄ±ldÄ± */
                    { q: "Ù‡ÙÙ… ........ Ø¥ÙÙ„Ù‰ Ø§Ù„Ù…ÙØ³Ù’Ø¬ÙØ¯â€«.â€¬", o: ["ÙŠÙØ°Ù’Ù‡ÙØ¨ÙˆÙ†Ù", "ÙŠÙØ°Ù’Ù‡ÙØ¨Ù’Ù†Ù", "ÙŠÙØ°Ù’Ù‡ÙØ¨Ù", "ØªÙØ°Ù’Ù‡ÙØ¨Ø§Ù†", "Ø£ÙØ°Ù’Ù‡ÙØ¨Ù"], a: 0 },
                    /* GÃœNCELLENDÄ°: Bunlar tek kelime olduÄŸu iÃ§in noktalar kaldÄ±rÄ±ldÄ± */
                    { q: "Ù‡ÙÙ†ÙÙ‘ ........ Ø§Ù„Ø¶Ù‘ÙÙŠÙˆÙâ€«.â€¬", o: ["ÙŠÙÙƒÙ’Ø±ÙÙ…Ù’Ù†Ù", "ÙŠÙÙƒÙ’Ø±ÙÙ…Ù", "ÙŠÙÙƒÙ’Ø±ÙÙ…ÙˆÙ†Ù", "ØªÙÙƒÙ’Ø±ÙÙ…Ù", "Ù†ÙÙƒÙ’Ø±ÙÙ…Ù"], a: 0 },
                    /* GÃœNCELLENDÄ°: Bunlar tek kelime olduÄŸu iÃ§in noktalar kaldÄ±rÄ±ldÄ± */
                    { q: "ÙŠÙØ¬ÙØ¨Ù Ø£ÙÙ†Ù’ ........ ØµØ§Ø¯ÙÙ‚Ù‹Ø§â€«.â€¬", o: ["ØªÙÙƒÙˆÙ†Ù", "ØªÙÙƒÙˆÙ†Ù", "ØªÙÙƒÙˆÙ†Ù", "ÙŠÙÙƒÙÙ†Ù’", "Ø£ÙÙƒÙˆÙ†Ù"], a: 0 },
                    /* GÃœNCELLENDÄ°: Bunlar tek kelime olduÄŸu iÃ§in noktalar kaldÄ±rÄ±ldÄ± */
                    { q: "Ù„Ø§ ØªÙÙƒÙÙ†Ù’ ........ .", o: ["ÙƒØ§Ø°ÙØ¨Ù‹Ø§", "ØµØ§Ø¯ÙÙ‚Ù‹Ø§", "Ù…ÙØ¨Ù’Ø³ÙˆØ·Ù‹Ø§", "Ù…ÙØ¨Ù’ØªÙØ³ÙÙ…Ù‹Ø§", "ØµÙØ¨ÙˆØ±Ù‹Ø§"], a: 0 },
                    /* GÃœNCELLENDÄ°: Bunlar tek kelime olduÄŸu iÃ§in noktalar kaldÄ±rÄ±ldÄ± */
                    { q: "ÙƒÙÙ†Ù’ ........ .", o: ["ØµÙØ¨ÙˆØ±Ù‹Ø§", "Ø¹ÙØ¬ÙˆÙ„Ù‹Ø§", "ØºÙØ¶Ù’Ø¨Ø§Ù†Ù‹Ø§", "Ø­ÙØ²ÙŠÙ†Ù‹Ø§", "ÙƒØ§Ø°ÙØ¨Ù‹Ø§"], a: 0 }

                ]
            },
{ 
                quiz: [
                    // --- 10. SÄ±nÄ±f 1. Ãœnite 1. Ders Kelimelerinden Yeni Sorular ---
                    { q: "........ Ø£ÙØ³Ø§Ø³ Ø§Ù„Ù…ÙØ¬Ù’ØªÙÙ…ÙØ¹.", o: ["Ø§Ù„Ø¹ÙØ¯Ù’Ù„", "Ø§Ù„ØµÙÙ‘Ø¯Ù’Ù‚", "Ø§Ù„Ø£ÙÙ…Ø§Ù†ÙØ©", "Ø§Ù„ØµÙÙ‘Ø¨Ù’Ø±", "Ø§Ù„Ø´ÙÙ‘ÙƒÙ’Ø±"], a: 0 },
                    { q: "Ø§Ù„ØµÙÙ‘Ø¨Ù’Ø±Ù Ù…ÙÙÙ’ØªÙØ§Ø­Ù ........ .", o: ["Ø§Ù„Ù’ÙÙØ±ÙØ¬Ù", "Ø§Ù„Ø¨ÙÙŠÙ’Øª", "Ø§Ù„Ù…ÙØ¬Ù’ØªÙÙ…ÙØ¹", "Ø§Ù„Ù†ÙÙ‘Ø¬Ø§Ø­", "Ø§Ù„Ø®ÙØ·ÙØ¥"], a: 0 },
                    { q: "ÙŠÙØ¬ÙØ¨Ù Ø¹ÙÙ„ÙÙŠÙ’Ù†Ø§ Ø£ÙÙ†Ù’ ........ Ø§Ù„ÙƒÙØ¨Ø§Ø± ÙˆÙÙ†ÙØ±Ù’Ø­ÙÙ…Ù Ø§Ù„ØµÙÙ‘ØºØ§Ø±.", o: ["Ù†ÙØ³Ø§Ø¹ÙØ¯Ù", "Ù†ÙÙƒÙ’Ø°ÙØ¨Ù", "Ù†ÙØºÙ’Ø¶ÙØ¨Ù", "Ù†ÙØ¤Ù’Ø°ÙŠ", "Ù†ÙØ²ÙˆØ±Ù"], a: 0 },
                    { q: "Ø§Ù„Ù…ÙØ³Ù’Ù„ÙÙ… Ù„Ø§ ........ ÙˆÙÙ„Ø§ ÙŠÙØ¤Ù’Ø°ÙŠ Ø£ÙØ­ÙØ¯Ù‹Ø§.", o: ["ÙŠÙÙƒÙ’Ø°ÙØ¨Ù", "ÙŠÙØ³Ø§Ø¹ÙØ¯Ù", "ÙŠÙØ´Ù’ÙƒÙØ±Ù", "ÙŠÙØ¨Ù’ØªÙØ³ÙÙ…Ù", "ÙŠÙØ­Ù’ØªÙØ±ÙÙ…Ù"], a: 0 },
                    { q: "Ø£ÙØ¹Ù’ØªÙØ°ÙØ±Ù Ø¹ÙÙ†Ù’Ø¯Ù ........ .", o: ["Ø§Ù„Ø®ÙØ·ÙØ¥", "Ø§Ù„Ù†ÙÙ‘Ø¬Ø§Ø­", "Ø§Ù„ØµÙÙ‘Ø¨Ø§Ø­", "Ø§Ù„Ø·ÙÙ‘Ø¹Ø§Ù…", "Ø§Ù„Ù…ÙØ´Ù’ÙƒÙÙ„ÙØ©"], a: 0 },
                    { q: "........ Ù‡ÙÙˆÙ Ø£ÙØ®Ùˆ Ø§Ù„Ø£ÙØ¨.", o: ["Ø§Ù„Ø¹ÙÙ…Ù‘", "Ø§Ù„Ø®Ø§Ù„", "Ø§Ù„Ø¬ÙØ¯Ù‘", "Ø§Ù„Ø£ÙØ®", "Ø§Ù„Ø£ÙØ¨"], a: 0 },
                    { q: "........ Ù‡ÙÙŠÙ Ø£ÙØ®Ù’ØªÙ Ø§Ù„Ø£ÙÙ…Ù‘.", o: ["Ø§Ù„Ø®Ø§Ù„ÙØ©", "Ø§Ù„Ø¹ÙÙ…ÙÙ‘Ø©", "Ø§Ù„Ø¬ÙØ¯ÙÙ‘Ø©", "Ø§Ù„Ø£ÙØ®Ù’Øª", "Ø§Ù„Ø£ÙÙ…Ù‘"], a: 0 },
                    { q: "Ù†ÙØ²ÙˆØ±Ù ........ ÙÙÙŠ Ù†ÙÙ‡Ø§ÙŠÙØ© Ø§Ù„Ø£ÙØ³Ù’Ø¨ÙÙˆØ¹.", o: ["Ø§Ù„Ø£ÙÙ‚Ø§Ø±ÙØ¨", "Ø§Ù„Ù…ÙØ¯ÙØ±ÙÙ‘Ø³", "Ø§Ù„Ø£ÙØµÙ’Ø¯ÙÙ‚Ø§Ø¡", "Ø§Ù„Ù…ÙØ·Ù’Ø¨ÙØ®", "Ø§Ù„ÙƒÙØ¨Ø§Ø±"], a: 0 },
                    { q: "ÙŠÙÙ‚ÙØ¨ÙÙ‘Ù„Ù Ø§Ù„Ø£ÙØ¨Ù’Ù†Ø§Ø¡ ........ Ø§Ù„ÙˆØ§Ù„ÙØ¯ÙÙŠÙ’Ù†.", o: ["ÙŠÙØ¯Ù", "Ø§Ù„Ø¨ÙÙŠÙ’Øª", "Ø§Ù„Ø·ÙÙ‘Ø¹Ø§Ù…", "Ø§Ù„Ø£ÙÙ‚Ø§Ø±ÙØ¨", "Ø§Ù„Ø£ÙØ³Ù’Ø±ÙØ©"], a: 0 },
                    { q: "Ø§Ù„Ø¨ÙÙŠÙ’Øª Ø§Ù„ÙÙ‘Ø°ÙÙŠ ÙÙÙŠÙ‡Ù ........ Ù‡ÙÙˆÙ Ø§Ù„Ø¨ÙÙŠÙ’Øª Ø§Ù„Ø³ÙÙ‘Ø¹ÙŠØ¯.", o: ["Ù…ÙØ­ÙØ¨ÙÙ‘Ø©", "Ø¹ÙØ¯Ù’Ù„", "ØµÙØ¨Ù’Ø±", "ØµÙØ¯Ù’Ù‚", "ØªÙØ¹Ø§ÙˆÙÙ†"], a: 0 }
                ]
            }
        ];


        // --- Gerekli Elementler ---
        const activityArea = document.getElementById('activity-area');
        const instructionText = document.getElementById('instruction-text');
        const progressDisplay = document.getElementById('progress-display');
        const progressBar = document.getElementById('progress-bar');
        const feedbackOverlay = document.getElementById('feedback-overlay');
        const feedbackIcon = document.getElementById('feedback-icon');
        // --- Ses DeÄŸiÅŸkenleri ---
        let audioCtx = null;
        // --- Durum DeÄŸiÅŸkenleri ---
        let activityQueue = [];
        let currentActivityIndex = 0;
        
        let scoreCorrect = 0;
        let scoreIncorrect = 0;
        let allRounds = []; // TÃ¼m raundlarÄ± (soru gruplarÄ±nÄ±) burada tutacaÄŸÄ±z
        let currentRoundIndex = 0; // Hangi raundda olduÄŸumuzu takip edeceÄŸiz
        // --- SES FONKSÄ°YONLARI ---
        function initAudioContext() {
            if (!audioCtx) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            }
        }
        
        function playSound(type) {
            if (!audioCtx) return;
            const oscillator = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            oscillator.type = 'sine';
            const now = audioCtx.currentTime;
            if (type === 'touch') {
                oscillator.frequency.setValueAtTime(200, now);
                gainNode.gain.setValueAtTime(0.1, now);
                gainNode.gain.exponentialRampToValueAtTime(0.0001, now + 0.1);
                oscillator.start(now);
                oscillator.stop(now + 0.1);
            } else if (type === 'correct') {
                oscillator.frequency.setValueAtTime(440, now);
                oscillator.frequency.linearRampToValueAtTime(880, now + 0.2);
                gainNode.gain.setValueAtTime(0.15, now);
                gainNode.gain.exponentialRampToValueAtTime(0.0001, now + 0.2);
                oscillator.start(now);
                oscillator.stop(now + 0.2);
            } else if (type === 'incorrect') {
                oscillator.frequency.setValueAtTime(300, now);
                oscillator.frequency.linearRampToValueAtTime(150, now + 0.3);
                gainNode.gain.setValueAtTime(0.15, now);
                gainNode.gain.exponentialRampToValueAtTime(0.0001, now + 0.3);
                oscillator.start(now);
                oscillator.stop(now + 0.3);
            }
        }
        
        document.body.addEventListener('click', initAudioContext, { once: true });
        // --- Fisher-Yates KarÄ±ÅŸtÄ±rma Fonksiyonu ---
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // --- (SADECE TEST) Aktiviteleri hazÄ±rla ---
       // --- (YENÄ°) RaundlarÄ± (10+10) HazÄ±rla ---
function prepareRounds() {
    // 1. Raund: activitiesData[0] (5 soru) ve activitiesData[1]'i (5 soru) birleÅŸtir
    const round1 = activitiesData[0].quiz.concat(activitiesData[1].quiz);

    // 2. Raund: activitiesData[2]'yi (10 soru) al
    const round2 = activitiesData[2].quiz;

    // RaundlarÄ± ana dizide sakla
    allRounds = [round1, round2];
    currentRoundIndex = 0; // 0. raunddan baÅŸla (yani round1)
}

// --- (YENÄ°) Mevcut Raundu YÃ¼kle ---
function loadCurrentRound() {
    // Mevcut raundun sorularÄ±nÄ± al
    const currentRoundQuestions = allRounds[currentRoundIndex];

    // SorularÄ± karÄ±ÅŸtÄ±r ve global kuyruÄŸa ata
    activityQueue = shuffle([...currentRoundQuestions]); // Orijinali bozmamak iÃ§in kopyasÄ±nÄ± karÄ±ÅŸtÄ±r

    // Bu raunddaki toplam soru sayÄ±sÄ±nÄ± ayarla
    grandTotalActivities = activityQueue.length;

    // Bu raund iÃ§in soru sayacÄ±nÄ± sÄ±fÄ±rla
    currentActivityIndex = 0;
}

        // --- (SADECE TEST) ETKÄ°NLÄ°K YÃœKLEYÄ°CÄ° ---
        function loadActivity() {
            activityArea.innerHTML = '';
            updateProgress();
            
            const activityData = activityQueue[currentActivityIndex]; 

          // Raund numarasÄ±nÄ± (Grup 1, Grup 2) baÅŸlÄ±ÄŸa ekle
        instructionText.textContent = "Ù‚ÙÙŠÙÙ…ÙŠ | Ø§ÙØ®Ù’ØªÙØ± Ø§Ù„Ù’Ø¬ÙÙˆØ§Ø¨ Ø§Ù„ØµÙÙ‘Ø­ÙŠØ­â€«.â€¬";
            buildQuiz(activityData);
        }

        // --- Test ArayÃ¼zÃ¼nÃ¼ OluÅŸtur ---
        function buildQuiz(data) {
            const quizContainer = document.createElement('div');
            quizContainer.className = 'quiz-container';

            const question = document.createElement('div');
            question.className = 'question';
            question.textContent = data.q;
            quizContainer.appendChild(question);

            const optionsContainer = document.createElement('div');
            optionsContainer.className = 'options';
            
            const optionsToShuffle = data.o.map((optionText, index) => {
                return {
                    text: optionText,
                    isCorrect: (index === data.a)
                };
            });
            const shuffledOptions = shuffle(optionsToShuffle);
            
            shuffledOptions.forEach(option => {
                const optionButton = document.createElement('button');
                optionButton.className = 'option';
                optionButton.textContent = option.text;
                optionButton.onclick = () => {
                   
                    playSound('touch');
                    checkQuizAnswer(option.isCorrect); 
                };
                optionsContainer.appendChild(optionButton);
            });
            quizContainer.appendChild(optionsContainer);
            activityArea.appendChild(quizContainer);
        }

        // --- Test Cevap KontrolÃ¼ ---
        function checkQuizAnswer(isCorrect) {
            showFeedback(isCorrect);
            if (isCorrect) {
                scoreCorrect++;
                setTimeout(nextActivity, 1200);
            } else {
                scoreIncorrect++;
            }
        }

        // --- Geri Bildirim (âœ” / âŒ) ---
        function showFeedback(isCorrect) {
            if (isCorrect) {
                feedbackIcon.textContent = 'âœ”';
                feedbackIcon.className = 'correct';
                playSound('correct');
            } else {
                feedbackIcon.textContent = 'âŒ';
                feedbackIcon.className = 'incorrect';
                playSound('incorrect');
            }
            feedbackOverlay.classList.add('show');
            if (!isCorrect) {
                setTimeout(() => {
                    feedbackOverlay.classList.remove('show');
                }, 1200);
            }
        }

       // --- Sonraki EtkinliÄŸe GeÃ§iÅŸ (Raund KontrollÃ¼) ---
// --- Sonraki EtkinliÄŸe GeÃ§iÅŸ (Raund KontrollÃ¼) ---
function nextActivity() {
Â  Â  feedbackOverlay.classList.remove('show');
Â  Â  currentActivityIndex++;Â 

Â  Â  if (currentActivityIndex === grandTotalActivities) {
Â  Â  Â  Â  // ---- RAUND BÄ°TTÄ° ----
Â  Â  Â  Â  currentRoundIndex++; // Bir sonraki raunda geÃ§
Â  Â  Â  Â Â 
Â  Â  Â  Â  if (currentRoundIndex < allRounds.length) {
Â  Â  Â  Â  Â  Â  // ---- BÄ°R SONRAKÄ° RAUND VAR ----
Â  Â  Â  Â  Â  Â  loadCurrentRound(); // Yeni raundun sorularÄ±nÄ± hazÄ±rla
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // YENÄ°: Raund bittiÄŸinde ilerleme Ã§ubuÄŸunu sÄ±fÄ±rla
Â  Â  Â  Â  Â  Â  progressBar.style.width = '0%';Â 
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  loadActivity(); Â  Â  // Yeni raundun ilk sorusunu yÃ¼kle
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  // ---- TÃœM RAUNDLAR BÄ°TTÄ° ----
Â  Â  Â  Â  Â  Â  showFinishScreen();
Â  Â  Â  Â  }
Â  Â  } else {
Â  Â  Â  Â  // ---- RAUND DEVAM EDÄ°YOR ----
Â  Â  Â  Â  loadActivity();
Â  Â  }
}

        // --- BitiÅŸ EkranÄ± ---
        function showFinishScreen() {
            activityArea.innerHTML = `
                <div id="finish-screen">
                    <p>Ø£ÙØ­Ù’Ø³ÙÙ†Ù’Øª! Ù„ÙÙ‚ÙØ¯ Ø£ÙÙƒÙ’Ù…ÙÙ„Ù’ØªÙ Ø¬ÙÙ…ÙŠØ¹ Ø§Ù„Ø£ÙÙ†Ù’Ø´ÙØ·ÙØ©â€«.â€¬</p>
                    
                    <div class="score-display">
                        <span class="score-item score-correct">âœ” ${scoreCorrect}</span>
                        <span class="score-item score-incorrect">âŒ ${scoreIncorrect}</span>
                    </div>

                    <button id="replay-button" onclick="restartGame()">ğŸ”„</button>
                </div>
            `;
            instructionText.textContent = "Ø§ÙÙ†Ù’ØªÙÙ‡ÙØª Ø§Ù„Ø£ÙÙ†Ù’Ø´ÙØ·ÙØ©";
            progressDisplay.textContent = "Ø§ÙÙƒÙ’ØªÙÙ…ÙÙ„";
            progressBar.style.width = '100%';
            progressBar.style.backgroundColor = 'var(--success-color)';
        }
        
        // --- Oyunu Yeniden BaÅŸlat Fonksiyonu ---
function restartGame() {
    playSound('touch');
    scoreCorrect = 0;
    scoreIncorrect = 0;
    
    // YENÄ°: Oyunu 0. raunda (Grup 1) geri ayarla
    currentRoundIndex = 0; 
    
    progressBar.style.width = '0%';
    progressBar.style.backgroundColor = 'var(--accent-color)';
    
    // createActivityQueue() yerine yeni fonksiyonlarÄ± Ã§aÄŸÄ±r
    loadCurrentRound(); // 0. Raundu (ilk 10 soru) yÃ¼kle
    loadActivity();     // Ä°lk soruyu gÃ¶ster
}


        // --- Ä°lerleme GÃ¼ncelleme ---
        function updateProgress() {
            if (grandTotalActivities === 0) {
                 progressDisplay.textContent = `0 / 0`;
                return;
            }
            
            if (currentActivityIndex === grandTotalActivities) return;
            const currentTotal = currentActivityIndex + 1;
            const percentage = (currentActivityIndex / grandTotalActivities) * 100;
            
            progressDisplay.textContent = `${currentTotal} / ${grandTotalActivities}`;
            progressBar.style.width = `${percentage}%`;
        }
        

        // --- BaÅŸlangÄ±Ã§ ---
        document.addEventListener('DOMContentLoaded', () => {
            // Veri setindeki (varsa) son kÃ¼Ã§Ã¼k harf hatalarÄ±nÄ± dÃ¼zelt
            activitiesData.forEach(round => {
                round.quiz.forEach(q => {
               
                     q.o = q.o.map(opt => opt.replace('tEktUb', 'ØªÙÙƒÙ’ØªÙØ¨Ù')
                                              .replace('tEkOni', 'ØªÙÙƒÙÙˆÙ†Ù')
                                           
                                   .replace('yEzhEbu', 'ÙŠÙØ°Ù’Ù‡ÙØ¨Ù')
                                              .replace('tEzhEbAn', 'ØªÙØ°Ù’Ù‡ÙØ¨ÙØ§Ù†')
                                              .replace('ElmustEÅŸfA', 'Ø§Ù„Ù…ÙØ³Ù’ØªÙØ´Ù’ÙÙÙ‰')
                                              .replace('mÃ¼derrisan', 'Ù…ÙØ¯ÙØ±Ù‘ÙØ³Ø§Ù†') // (Bu artÄ±k veri setinde dÃ¼zeltildi)
                                             );
                });
            });
            
            prepareRounds();    // RaundlarÄ± (10+10) grupla
loadCurrentRound(); // Ä°lk raundu (0) yÃ¼kle
loadActivity();     // Ä°lk raundun ilk sorusunu yÃ¼kle
        });

    </script>
</body>
</html>